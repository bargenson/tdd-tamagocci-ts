<!DOCTYPE html>
<html>
<head>
    <title>Tamagocci</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script type="text/javascript" src="dist/bundle.js"></script>
    <script type="text/javascript">
        window.onload = function() {
			var eatButton = document.querySelector('#tamagocci .eat-button');
		    var playButton = document.querySelector('#tamagocci .play-button');

        	var tamagocci = new Pikachu();
            
            tamagocci.ondie = function() {
                stopTheGame();
            }

        	update();

        	eatButton.onclick = function() {
        		tamagocci.eat();
        		update();
        	}

        	playButton.onclick = function() {
        		tamagocci.play();
        		update();
        	}

        	var intervalID = setInterval(function() {
        		tamagocci.becomeOlder();
        		update();
        	}, 5000);

        	function displayOrRefreshTamagocciPicture() {
        		document.querySelector('#tamagocci .picture').setAttribute('src', tamagocci.getPicture());
        	}

        	function displayOrRefreshTamagocciInfo() {
	        	document.querySelector('#tamagocci .age').innerHTML = tamagocci.age;
	        	document.querySelector('#tamagocci .minWeight').innerHTML = tamagocci.minWeight;
	        	document.querySelector('#tamagocci .weight').innerHTML = tamagocci.weight;
	        	document.querySelector('#tamagocci .maxWeight').innerHTML = tamagocci.maxWeight;
	        	document.querySelector('#tamagocci .happiness').innerHTML = tamagocci.happiness;
        	}

        	function update() {
        		displayOrRefreshTamagocciInfo();
        		displayOrRefreshTamagocciPicture();
        	}

        	function stopTheGame() {
        		eatButton.onclick = null;
        		playButton.onclick = null;
        		clearInterval(intervalID);
        	}
        };
    </script>
</head>
<body>
    <div id="tamagocci">
        <h1>Tamagocci</h1>
    	<img class="picture" />
    	<div class="information">
            <strong>Age:</strong><span class="age"></span>
            <strong>Min Weight:</strong><span class="minWeight"></span>
            <strong>Weight:</strong><span class="weight"></span>
            <strong>Max Weight:</strong><span class="maxWeight"></span>
            <strong>Happiness:</strong><span class="happiness"></span>
        </div>
    	<section class="actions">
            <strong>Actions</strong>
            <button class="eat-button">Give food</button>
    	    <button class="play-button">Entertain</button>
        </section>
    </div>
</body>
</html>